{#
/**
 * @file
 * Ghostweb theme implementation to display a single Drupal page.
 */
#}
{% if page.service_top %}
  <div class="region region-service-top visually-hidden" aria-hidden="true">
    {{ page.service_top }}
  </div>
{% endif %}

<header class="site-header" role="banner">
  {# Header Top Row: Logo/Slogan and Service Region (Search/Social) #}
  {% if page.header_left or page.header_service_region %}
    <div class="site-header-top-row">
      <div class="container"> {# Используем Bootstrap контейнер #}
        <div class="row align-items-center">
          <div class="col-md-6 col-lg-7"> {# Больше места для логотипа/названия #}
            {% if page.header_left %}
              <div class="region region-header-left">
                {{ page.header_left }}
              </div>
            {% endif %}
          </div>
          <div class="col-md-6 col-lg-5">
            {% if page.header_service_region %}
              <div class="region region-header-service-region">
                {{ page.header_service_region }}
              </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  {% endif %}

  {# Navigation Sticky Top #}
  {% if page.navigation_sticky_top %}
    <div class="region region-navigation-sticky-top sticky-top shadow-sm"> {# Bootstrap .sticky-top #}
      <div class="container"> {# Ограничиваем ширину меню #}
        {{ page.navigation_sticky_top }}
      </div>
    </div>
  {% endif %}
</header>

{# Main Content Area #}
<main class="main-content-wrapper" role="main">
  {% set main_container_class = (is_front and not logged_in) ? 'container-fluid' : 'container' %}

  <div class="{{ main_container_class }}">
      {# НОВЫЙ РЕГИОН ДЛЯ РЕДАКТОРОВ #}
    {% if page.editor_region %}
      <div class="region region-editor-region mb-4"> {# mb-4 для отступа снизу #}
        {{ page.editor_region }}
      </div>
    {% endif %}
	
    {# Highlighted region #}
    {% if page.highlighted %}
      <div class="region region-highlighted">
        {{ page.highlighted }}
      </div>
    {% endif %}

    {# Breadcrumbs #}
    {% if page.breadcrumb %}
      <div class="breadcrumb-region-wrapper">
        {{ page.breadcrumb }}
      </div>
    {% endif %}

    {# Проверяем наличие сайдбара и условие отображения #}
    {% set has_sidebar_content = page.sidebar ? true : false %}
    {% set is_front_anonymous = is_front and not logged_in %}
    {% set display_sidebar = has_sidebar_content and not is_front_anonymous %}

    {# Ряд для основного контента и сайдбара #}
    <div class="row">
      {% if page.content %}
        <div class="region region-content {{ display_sidebar ? 'col-lg-8 order-1' : 'col-12 order-1' }}">
          {{ page.content }}
        </div>
      {% endif %}

      {% if display_sidebar %}
        <aside class="site-sidebar col-lg-4 order-2" role="complementary">
          <div class="region region-sidebar">
            {{ page.sidebar }}
          </div>
        </aside>
      {% endif %}
    </div>

    {# Теперь блоки main_content_bottom_1, _2, _3 на всю ширину контейнера #}
    {% if page.main_content_bottom_1 %}
      <div class="region region-main-content-bottom-1 mt-4">
        {{ page.main_content_bottom_1 }}
      </div>
    {% endif %}
    {% if page.main_content_bottom_2 %}
      <div class="region region-main-content-bottom-2 mt-4">
        {{ page.main_content_bottom_2 }}
      </div>
    {% endif %}
    {% if page.main_content_bottom_3 %}
      <div class="region region-main-content-bottom-3 mt-4">
        {{ page.main_content_bottom_3 }}
      </div>
    {% endif %}
  </div>
</main>

{# Mid Footer #}
{% if page.mid_footer %}
  <footer class="site-mid-footer">
    <div class="region region-mid-footer">
      <div class="container">
        {{ page.mid_footer }}
      </div>
    </div>
  </footer>
{% endif %}

{# Bottom Footer (4 columns) #}
{% if page.bottom_footer_col_1 or page.bottom_footer_col_2 or page.bottom_footer_col_3 or page.bottom_footer_col_4 %}
  <footer class="site-footer-bottom-row" role="contentinfo">
    <div class="container">
      <div class="row">
        {% if page.bottom_footer_col_1 %}
          <div class="col-md-6 col-lg-3">
            <div class="region region-bottom-footer-col-1">
              {{ page.bottom_footer_col_1 }}
            </div>
          </div>
        {% endif %}
        {% if page.bottom_footer_col_2 %}
          <div class="col-md-6 col-lg-3">
            <div class="region region-bottom-footer-col-2">
              {{ page.bottom_footer_col_2 }}
            </div>
          </div>
        {% endif %}
        {% if page.bottom_footer_col_3 %}
          <div class="col-md-6 col-lg-3">
            <div class="region region-bottom-footer-col-3">
              {{ page.bottom_footer_col_3 }}
            </div>
          </div>
        {% endif %}
        {% if page.bottom_footer_col_4 %}
          <div class="col-md-6 col-lg-3">
            <div class="region region-bottom-footer-col-4">
              {{ page.bottom_footer_col_4 }}
            </div>
          </div>
        {% endif %}
      </div>
    </div>
  </footer>
{% endif %}

{# Copyrights #}
{% if page.copyrights %}
  <div class="site-copyrights-row">
    <div class="region region-copyrights">
      <div class="container">
        {{ page.copyrights }}
      </div>
    </div>
  </div>
{% endif %}

{% if page.service_bottom %}
  <div class="region region-service-bottom visually-hidden" aria-hidden="true">
    {{ page.service_bottom }}
  </div>
{% endif %}

{# Back to Top Button HTML #}
<button id="backToTopBtn" title="Go to top"></button>
